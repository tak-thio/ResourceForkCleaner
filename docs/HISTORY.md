# 開発履歴 (Project History)

## プロジェクト概要
Macのリソースフォークファイル（`._*`）や `.DS_Store` などの不要ファイルを、指定したフォルダ以下から再帰的に検索し、一括削除するデスクトップアプリケーションの開発。

## 開発タイムライン

### Phase 1: プロトタイプ作成
- **要件**:
    - ローカルで動作するMac用アプリ
    - サブフォルダも対象
    - 削除前に一覧表示
    - 5万件規模のファイル数に対応
- **実装**:
    - Python + Tkinter を採用。
    - UIフリーズ防止のため、スキャン処理と削除処理を別スレッド（`threading`）化。
    - 大量データ表示時の負荷対策として、リスト表示を2000件で省略するロジックを実装。

### Phase 2: UX改善と安全性向上
- **追加機能**:
    - **プログレスバー**: 処理の進捗を可視化（スキャン中は不確定モード、削除中は確定モード）。
    - **中止ボタン**: 長時間の処理を途中でキャンセル可能に。
    - **削除確認**: 削除実行前にダイアログで確認。
- **テスト**:
    - ダミーファイル生成スクリプト（`create_test_files.py`）を作成し、2000件〜5万件での動作検証を実施。

### Phase 3: 環境互換性の解決
- **課題**:
    - macOS標準のPython（古いバージョン）とTkinterが、最新のmacOSバージョン番号を誤認識しエラーが発生（`macOS 26 required...`）。
- **解決策**:
    - Homebrew経由で新しいPythonを導入。
    - 当初 Python 3.14 (HEAD) を試行したが、後述のライブラリ互換性問題により変更。

### Phase 4: ドラッグ・アンド・ドロップ (D&D) 機能の実装
- **要望**: フォルダ選択をD&Dで行いたい。
- **課題**:
    - `tkinterdnd2` ライブラリを使用したが、Python 3.14 (Tcl/Tk 9.0) 環境ではバイナリ互換性がなくクラッシュ。
- **解決策**:
    - 安定版である **Python 3.11 (Tcl/Tk 8.6)** 環境を採用。
    - `brew install python@3.11 python-tk@3.11` で環境を再構築。
    - これにより `tkinterdnd2` が正常に動作し、D&D機能を実現。

### Phase 5: アプリ化と配布準備
- **ツール**: `PyInstaller` を使用。
- **設定**:
    - `--noconsole --windowed`: ターミナル画面を出さないMacアプリ形式。
    - `--collect-all tkinterdnd2`: D&Dライブラリの依存ファイルを強制的に同梱。
- **成果物**: `dist/ResourceForkCleaner.app` が生成され、単体で動作することを確認。

### Phase 6: バージョン管理
- Gitリポジトリの初期化。
- `.gitignore` の設定（ビルド生成物や仮想環境を除外）。
- GitHubリポジトリ (`tak-thio/ResourceForkCleaner`) への連携完了。
